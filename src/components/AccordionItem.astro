---
interface Props {
	title: string;
	id: string;
}

const { title, id } = Astro.props;
const panelId = `panel-${id}`;
const triggerId = `trigger-${id}`;
---

<div class="accordion-item" data-accordion-item>
	<button
		type="button"
		class="accordion-trigger"
		aria-expanded="false"
		aria-controls={panelId}
		id={triggerId}
		data-accordion-trigger
	>
		{title}
	</button>
	<div
		id={panelId}
		class="accordion-panel"
		role="region"
		aria-labelledby={triggerId}
	>
		<div class="accordion-content">
			<slot />
		</div>
	</div>
</div>

<style>
	.accordion-item {
		border-bottom: 1px solid var(--color-border);
	}
	.accordion-item:first-child {
		border-top: 1px solid var(--color-border);
	}
	.accordion-trigger {
		width: 100%;
		padding: 1rem 0;
		background: none;
		border: none;
		color: var(--color-primary);
		font-family: inherit;
		font-size: 1.25rem;
		text-align: left;
		cursor: pointer;
		transition: color 0.2s ease;
		position: relative;
	}
	.accordion-trigger:hover,
	.accordion-trigger:focus-visible {
		color: var(--color-text);
	}
	.accordion-trigger::after {
		content: '+';
		position: absolute;
		right: 0;
		font-size: 1.5rem;
		line-height: 1;
	}
	.accordion-item.open .accordion-trigger::after {
		content: 'âˆ’';
	}
	.accordion-trigger:focus-visible {
		outline: 2px solid var(--color-primary);
		outline-offset: 2px;
	}
	.accordion-panel {
		overflow: hidden;
		max-height: 0;
		transition: max-height 0.35s ease-out;
	}
	.accordion-item.open .accordion-panel {
		max-height: min(80vh, 1200px);
		overflow-y: auto;
		overflow-x: hidden;
		transition: max-height 0.4s ease-in;
		scrollbar-width: none;
		-ms-overflow-style: none;
	}
	.accordion-item.open .accordion-panel::-webkit-scrollbar {
		display: none;
	}
	.accordion-content {
		padding: 0 0 1.25rem;
		color: var(--color-text);
		font-size: 1rem;
		line-height: 1.6;
		overflow-wrap: break-word;
	}
	@media (min-width: 768px) {
		.accordion-trigger {
			padding: 1.25rem 0;
			font-size: 1.4rem;
		}
		.accordion-trigger::after {
			font-size: 1.75rem;
		}
		.accordion-content {
			padding: 0 0 1.5rem;
			font-size: 1.1rem;
		}
	}
	@media (min-width: 1200px) {
		.accordion-trigger {
			padding: 1.5rem 0;
			font-size: 1.6rem;
		}
		.accordion-trigger::after {
			font-size: 2rem;
		}
		.accordion-content {
			padding: 0 0 1.75rem;
			font-size: 1.2rem;
		}
	}
</style>
